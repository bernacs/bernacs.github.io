// main hierarchy & sizes
// ————————————————————————————————————————————————————————————————————————————

body {
	@include margin(0 0 0 0);
		min-height: 100vh;
}

.narrative-container{
	@include outer-container();
	max-width: 600px;
	
	header#main {
		@include span-columns(12);
	}

	.no-navigation {
		main.narrative {
			@include span-columns(12 of 12);
			@include pad(flex-gutter(16));
			padding-left: flex-gutter(16) / 2;
			padding-right: flex-gutter(16) / 2;
		}
	}
}

.top-container {
	@include outer-container();
	min-width: 720px;

	header#main {
		@include span-columns(12);

		h1 {
			@include span-columns(3);
		}

		body.front & {
			position: relative;
			z-index: 3;
		}
	}

	.main-container {
		@include span-columns(12);
		position: relative;

		// body.front & {
		// 	z-index: 3;
		// }

		nav {
			@include span-columns(3 of 12);

			body.front & {
				position: relative;
				z-index: 3;
			}
		}
		main.content {
			@include span-columns(9 of 12);

			body.front & {
				z-index: 0;
			}
		}
	}

	.no-navigation {
		@include span-columns(12);
		position: relative;

		main.content {
			@include span-columns(9 of 12);
			@include shift(1.5);
		}
	}
}

// lower elements
// ————————————————————————————————————————————————————————————————————————————

// top header
header#main {
	@include pad(flex-gutter(16));
}

// main container
.main-container {

	nav {
		@include pad(flex-gutter(16));
		padding-right: flex-gutter(16) / 2;

		height: 100vh;

		overflow-y: hidden !important;

		// fallback for browsers without position: sticky support
		// Sticky polyfill does not detect padding correctly if
		// defined only in percentages (with flex-gutter)
		&.fallback {
			@include pad(22.5px);
			padding-right: 11.25px;

			@include media(max-width 720px) {
				@include pad(12.65px);
				padding-right: 6.31667px;
				width: 167.281px !important;
			};

			@include media(min-width 720px max-width 800px) {
				@include pad(12.65px);
				padding-right: 6.31667px;
			};

			@include media(min-width 800px max-width 900px) {
				@include pad(15.8167px);
				padding-right: 7.9px;
			};

			@include media(min-width 900px max-width 1000px) {
				@include pad(17.5667px);
				padding-right: 8.78333px;
			};

			@include media(min-width 1000px max-width 1100px) {
				@include pad(19.3333px);
				padding-right: 9.66667px;
			};

			@include media(min-width 1100px max-width 1200px) {
				@include pad(21.0833px);
				padding-right: 10.5333px;
			};
		}
	}

	main.content {
		@include pad(flex-gutter(16));
		padding-left: flex-gutter(16) / 2;

		article {
			header.project-header {
			}
			footer {
				@include margin($base-spacing null null null);

				text-align: right;
			}
		}
	}
}

.sticky {
	position: -webkit-sticky;
	position: -moz-sticky;
	position: -ms-sticky;
	position: -o-sticky;
	position: sticky;
	top: 0px;

	&:before, &:after {
		@include clearfix;
	}
}