---
exclude: yes
---
{% assign projects = (site.pages | where: "layout" , "project") %}{
  "__comment": "site root",
  "name": "Sonia Bernac",
  "link": "{{ site.baseurl }}/",
  "img": "{{ site.baseurl }}/{{ site.graph_dir }}/root.png",
  "offset": "60",
  "linkLength": "200",
  "linkStrength": "0.5",
  "children": [{% for project in projects %}{% assign current = forloop.index %}
    {
      "__comment": "project {{ current }} of {{ forloop.length }}",
      "name": "{{ project.title }}",
      "link": "{{ project.url }}",
      "img": "{% if project.img %}{{ site.baseurl }}/{{ site.graph_dir }}/{{ project.img }}{% else %}{{ site.baseurl }}/{{ site.graph_dir }}/project.png{% endif %}",
      "offset": "{% if project.offset %}{{ project.offset }}{% else %}65{% endif %}",
      "linkLength": "",
      "linkStrength": "",
      "children": [{% for collection in site.collections %}{% if project.url == collection[1].link %}{% for work in collection[1].docs %}
        {
          "__comment": "work {{ forloop.index }} of {{ forloop.length }} under project {{ current }}",
          "name": "{{ work.title }}",
          "link": "{{ project.url }}#{{ work.title | slugify }}",
          "img": "{% if work.img %}{{ site.baseurl }}/{{ site.graph_dir }}/{{ work.img }}{% endif %}",
          "offset": "{{ work.offset }}"
        }{% unless forloop.last %},{% endunless %}{% endfor %}{% endif %}{% endfor %}
      ]
    }{% unless forloop.last %},{% endunless %}{% endfor %}
  ]
}